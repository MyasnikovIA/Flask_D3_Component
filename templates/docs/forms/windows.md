# Работа с окнами

В макросах JavaScript в платформе D3 можно открывать следующие типы окон: окно сообщения, окно с вопросом (с кнопками Да, Нет), самостоятельное окно.

## Окно сообщения

Для вызова окна сообщения необходимо вызвать функцию D3Api.notify.
В первом параметре указывается заголовок сообщения.
Во втором параметре указывается сам текст сообщения.
В третьем параметре указывается время через которое окно должно скрыться.
```js
D3Api.notify('Сохранено','Платеж сохранен успешно',{'expires':2000});
```

Если окно нельзя закрыть до нажатия на него пользователем, необходимо установить значение false.

```js
D3Api.notify('Предупреждение','Необходимо заполнить информацию о получателе услуг',{'expires':false});
```

## Окно вопроса

Для вызова окна вопроса необходимо вызвать функцию confirm. Если пользователь нажал кнопку "Да", в результате функции будет значение true, иначе false.

```js
if (confirm ('Платеж был сохранен. Вы действительно хотите отправить платеж?'))
{
    Form.sendPayments();
}
```

## Самостоятельное окно

Для открытия другой формы можно воспользоваться функцией openForm.

В первом параметре задается относительный путь до формы.

Во втором параметре указываются дополнительные данные:
* vars - значения переменных, которые передаются в открываемую форму,
* onclose - функция, которую необходимо выполнить после закрытия формы.

В третьем параметре указывается объект относительно которого открывается форма.
Если указан объект D3Api.MainDom, форма будет открыта на весь рабочий стол.
Если указан компонент текущей формы, форма будет открыта относительно текущей формы.

```js
openForm('gisgmp/gisgmp_charge_test/gisgmp_charging_down_payment',
{
    vars: {
        response: getVar('response'), payment_id:getValue('gisgmp_payments_default'), from_gisgmp:getControlProperty('gisgmp_payments_default','data')['from_gisgmp']
    }
}, D3Api.MainDom);
```


```js
openForm('gisgmp/gisgmp_analitics/bills_analitics_subform',
	{vars:{},
	onclose:[function(mod){
		close();
	}]
}, getControl('DIV_ONE'));
```

## Окно печатной формы

Для открытия окна печатной формы можно воспользоваться функцией showReport.

В первом параметре задается относительный путь до формы.

Во втором параметре указываются дополнительные данные:
* vars - значения переменных, которые передаются в открываемую форму,
* onclose - функция, которую необходимо выполнить после закрытия формы.

```js
D3Api.showReport('gisgmp/gisgmp_payments_test/report/gisgmp_payment_report', {vars:{id:getVar('PRIMARY')}});
```
